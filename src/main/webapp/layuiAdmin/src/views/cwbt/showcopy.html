
<html>
<head>
<meta charset="utf-8">
	<title>工作卡模板详情</title>
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="format-detection" content="telephone=no">
	<link rel="stylesheet" href="/layui/layui/css/layui.css" medidia="all" />
	<link rel="stylesheet" href="/layui/css/news.css" media="all" />
	<link rel="stylesheet" href="/layui/css/common.css" media="all" />
	<link rel="stylesheet" href="/layui/layui/css/change.css" medidia="all" />
	<style>
		#layui-table-page1{text-align:center;}
		.layui-table-view {border-top-left-radius: 0px;border-top-right-radius: 0px;}
	</style>
</head>
<body  style="width:100%;height:100%">
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
			  <legend>复制板信息</legend>
	</fieldset>
	<center>
<div id="wraper">
	<div class="layui-form-item">
		<div class="layui-inline">
		  <label class="layui-form-label" style="width: 90px;">工作卡名称</label>
		    <div class="layui-input-inline">
		    	<input type="text" readonly="readonly" class="layui-input search_input" :value="wcWorkcard.name">
		    </div>
		</div>
		<div class="layui-inline">
		  <label class="layui-form-label" style="width: 90px;">工作卡卡号</label>
		    <div class="layui-input-inline">
		    	<input type="text" readonly="readonly" class="layui-input search_input" :value="wcWorkcard.number">     
		    </div>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-inline">
		  <label class="layui-form-label" style="width: 90px;">设备名称</label>
		    <div class="layui-input-inline">
		    	<input type="text" readonly="readonly" class="layui-input search_input" :value="wcWorkcard.equipmentname">
		    </div>
		</div>
		<div class="layui-inline">
		  <label class="layui-form-label" style="width: 90px;">工作卡类型</label>
		    <div class="layui-input-inline">
		    	<input type="text" readonly="readonly" class="layui-input search_input" :value="wcWorkcard.type | type">     
		    </div>
		</div>
	</div>
	<div class="layui-form-item" v-if="wcWorkcard.type==1">
		<div class="layui-inline">
		  <label class="layui-form-label" style="width: 90px;">计时制式</label>
		    <div class="layui-input-inline">
		    	<input type="text" readonly="readonly" class="layui-input search_input" :value="wcWorkcard.chronograph | chronograph">
		    </div>
		</div>
		<div class="layui-inline">
		  <label class="layui-form-label" style="width: 90px;">维修级别</label>
		    <div class="layui-input-inline">
		    	<input type="text" readonly="readonly" class="layui-input search_input" :value="wcWorkcard.levelname">     
		    </div>
		</div>
	</div>
	
	<div class="layui-form-item"  v-if="wcWorkcard.type==1">
		<div class="layui-inline">
		  <label class="layui-form-label" style="width: 90px;">周期开始时间</label>
		    <div class="layui-input-inline">
		    	<input type="text" readonly="readonly" class="layui-input search_input" :value="wcWorkcard.plannedtime">
		    </div>
		</div>
		<div class="layui-inline">
		  <label class="layui-form-label" style="width: 90px;">周期结束时间</label>
		    <div class="layui-input-inline">
		    	<input type="text" readonly="readonly" class="layui-input search_input" :value="wcWorkcard.lasttime">     
		    </div>
		</div>
	</div>
	
	<div class="layui-form-item">
		<div class="layui-inline">
		  <label class="layui-form-label" style="width: 90px;">上次维修时间</label>
		    <div class="layui-input-inline">
		    	<input type="text" readonly="readonly" class="layui-input search_input" :value="wcWorkcard.lastOverhaulTime">
		    </div>
		</div>
		<div class="layui-inline">
		  <label class="layui-form-label" style="width: 90px;">完成时间</label>
		    <div class="layui-input-inline">
		    	<input type="text" readonly="readonly" class="layui-input search_input" :value="wcWorkcard.finishtime">
		    </div>
		</div>
	</div>
	
	
	<div class="layui-form-item">
		<div class="layui-inline" v-if="wcWorkcard.isModel==0">
			<label class="layui-form-label" style="width: 90px;">完成状况</label>
			    <div class="layui-input-inline">
			    	<input type="text" readonly="readonly" class="layui-input search_input layui-bg-blue" :value="wcWorkcard.statusname">   
			    </div>
		</div>
		<div class="layui-inline" >
		<div v-if="wcWorkcard.type==0">
			<label class="layui-form-label" style="width: 90px;">维修方式</label>
		    <div class="layui-input-inline">
		    	<input type="text" readonly="readonly" class="layui-input search_input" :value="wcWorkcard.overhaulfunction | overhaulfunction">     
		    </div>
		</div>
		<div  v-if="wcWorkcard.type==1">
				<label class="layui-form-label" style="width: 90px;">期望完成时间</label>
		    <div class="layui-input-inline">
		    	<input type="text" readonly="readonly" class="layui-input search_input" :value="wcWorkcard.expectedtime">
		    </div>
		</div>
		</div>
	</div>
	
	</div>
	</center>
	<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
			  <legend>工作任务</legend>
	</fieldset>
	<table id="dataTable" lay-filter="dataTable">
			 
	</table>
	
	<center>
	<div class="layui-form-item">
		<div class="layui-inline" >
      		<button class="layui-btn layui-btn-primary" id="empty">清空</button>
		</div>
	</div>
	</center>
	<script type="text/javascript" src="/layui/layui/layui.js"></script>
	<script type="text/javascript" src="/layui/js/dataSelect.js"></script>
	<script type="text/javascript" src="/layuiAdmin/src/views/cwbt/js/layer.js"></script>
	<script type="text/javascript" src="/jquery-3.3.1/jquery-3.3.1/jquery-3.3.1.js"></script>
	<script src="/layuiAdmin/src/views/cwbt/js/vue.min.js"></script>
	
	<script>
		var table;
		var layer;
		var laytpl;
		var dataTable;
		var laydate;
		var form;
		var $;
		var workcordid = sessionStorage.copyworkcordid;
		 if(workcordid!=null){//不为null;不为undefined
			 window.onload = show();
	  }else{
			workcordid = 0;
		}
		layui.use(['table','form','layer','laytpl','laydate'], function(){
		  table = layui.table,
		  layer = layui.layer,
		  laytpl = layui.laytpl;
		  laydate = layui.laydate;
		 form=layui.form,
		  $ = layui.jquery;
		  dataTable=table.render({
			    elem: '#dataTable'
			    ,height: 'auto'
			    ,url: '/worktasktable/select?workcordid='+workcordid //数据接口
			    ,cols: [[ //表头
			      {field: 'no', title: '序号',width:'10%',type:'numbers'}
			      ,{field: 'name', title: '内容'}
			      ,{field: 'mark', title: '验收标准'}
			    ]]
		  });
		
		  $("#empty").click(function(){	
			  sessionStorage.removeItem('copyworkcordid');//删除
			  layer.alert("清空成功！");
			  finalily();
		  });
		  
		});
		
		//关闭窗口
		function  finalily(){
			parent.location.reload();
			var index=parent.layer.getFrameIndex(window.name);
			parent.layer.close(index);
			}
		
	
		function reloadData(formData) {
			//console.log(formData);
			dataTable.reload({
				where: formData
			});
		}
		
		  
		  //时间格式处理
		  function createTime(v){
				var date = new Date(v);
			    var y = date.getFullYear();
			    var m = date.getMonth()+1;
			    m = m<10?'0'+m:m;
			    var d = date.getDate();
			    d = d<10?("0"+d):d;
			    var str = y+"-"+m+"-"+d;
			    return str;
			}
		
		  var vue = new Vue({
				el: "#wraper",
				data: {
					wcWorkcard:{}
				},
				filters: {
					type:function(value){
						if(value == 1){
							return "周期工作卡";
						}else if(value == 2){
							return "临时工作卡";
						}
						
					},
					chronograph:function(value){
						if(value == 0){
							return "定期制";
						}else if(value == 1){
							return "定时制";
						}
					},
					overhaulfunction:function(value){
						if(value == 0){
							return "自行维修";
						}else if(value == 1){
							return "委外维修";
						}
					}
					
				
				}
		  });
		  //查询工作卡
		  function show(){
			  $.ajax({
					url: "/workCard/selectbyid",
					type: "post",
					data: {
						id: workcordid
					},
					dataType: "json",
					success: function (res) {
						vue.wcWorkcard = res;
					}
					
				}); 
		  }
		 
		 

		
		</script>
	
<style>
	.layui-layer-title{background: #fff;border: 1px solid #e5e5e5;border-top-left-radius: 4px;border-top-right-radius: 4px;font-size: 18px;}
</style>

</body>
</html>